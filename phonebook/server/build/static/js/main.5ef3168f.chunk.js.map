{"version":3,"sources":["services/persons.js","components/FilterForm.js","components/PersonsFormInput.js","components/Person.js","components/DisplayPersons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newPerson","post","id","delete","person","put","FilterForm","filter","setFilter","className","name","value","onChange","e","target","PersonsFormInput","number","handleChange","addPerson","onSubmit","type","Person","deletePerson","onClick","DisplayPersons","persons","toLowerCase","includes","map","Notification","message","App","useState","setPersons","setNewPerson","setMessage","showMessage","setTimeout","useEffect","personServices","catch","error","console","resetInput","event","preventDefault","existingPerson","find","window","confirm","updatePersonObj","newPersonObj","concat","alert","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5ef3168f.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst baseUrl = \"http://localhost:3001/api/persons\";\n\nconst get = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newPerson) => {\n  const request = axios.post(baseUrl, newPerson);\n  return request.then((response) => response.data);\n};\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response);\n};\n\nconst update = (id, person) => {\n  const request = axios.put(`${baseUrl}/${id}`, person);\n  return request.then((response) => response.data);\n};\n\nexport default { get, create, deletePerson, update };\n","import React from \"react\";\n\nconst FilterForm = ({ filter, setFilter }) => {\n  return (\n    <div className=\"filter-container\">\n      <label>filter show with:</label>\n      <input\n        name=\"filter\"\n        value={filter}\n        onChange={(e) => setFilter(e.target.value)}\n      />\n    </div>\n  );\n};\n\nexport default FilterForm;\n","import React from \"react\";\n\nconst PersonsFormInput = ({ name, number, handleChange, addPerson }) => {\n  return (\n    <div className=\"persons-form-container\">\n      <form onSubmit={addPerson}>\n        <div className=\"persons-form\">\n          <label>name:</label>{\" \"}\n          <input name=\"name\" value={name} onChange={handleChange} />\n        </div>\n        <div className=\"persons-form\">\n          <label>number:</label>{\" \"}\n          <input name=\"number\" value={number} onChange={handleChange} />\n        </div>\n        <div className=\"persons-form-button\">\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default PersonsFormInput;\n","import React from \"react\";\n\nconst Person = ({ person, deletePerson }) => {\n  return (\n    <li>\n      {person.name} {person.number}\n      <button onClick={() => deletePerson(person.id, person.name)}>\n        delete\n      </button>\n    </li>\n  );\n};\n\nexport default Person;\n","import React from \"react\";\nimport Person from \"./Person\";\n\nconst DisplayPersons = ({ persons, filter, deletePerson }) => {\n  return (\n    <div className=\"display-persons-container\">\n      <ul>\n        {persons\n          .filter((person) =>\n            person.name.toLowerCase().includes(filter.toLowerCase())\n          )\n          .map((person) => {\n            return (\n              <Person\n                key={person.id}\n                person={person}\n                deletePerson={deletePerson}\n              />\n            );\n          })}\n      </ul>\n    </div>\n  );\n};\n\nexport default DisplayPersons;\n","const Notification = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return <div className={message.type}>{message.message}</div>;\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from \"react\";\nimport personServices from \"./services/persons\";\nimport FilterForm from \"./components/FilterForm\";\nimport PersonsFormInput from \"./components/PersonsFormInput\";\nimport DisplayPersons from \"./components/DisplayPersons\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newPerson, setNewPerson] = useState({\n    name: \"\",\n    number: \"\",\n  });\n  const [filter, setFilter] = useState(\"\");\n  const [message, setMessage] = useState(null);\n\n  const { name, number } = newPerson;\n\n  const showMessage = (message, type) => {\n    setMessage({\n      message,\n      type,\n    });\n\n    setTimeout(() => {\n      setMessage(null);\n    }, 4000);\n  };\n\n  useEffect(() => {\n    personServices\n      .get()\n      .then((response) => {\n        setPersons(response);\n      })\n      .catch((error) => {\n        showMessage(\"Server is unavailable\", \"error\");\n        console.error(error);\n      });\n  }, []);\n\n  const resetInput = () => {\n    setNewPerson({ name: \"\", number: \"\" });\n  };\n\n  const addPerson = (event) => {\n    event.preventDefault();\n\n    if (!newPerson.name || !newPerson.number) {\n      alert(\"Name and number field must be filled\");\n      return;\n    }\n\n    const existingPerson = persons.find(\n      (person) => person.name === newPerson.name\n    );\n\n    if (existingPerson) {\n      const result = window.confirm(\n        `${existingPerson.name} is already added to phonebook, replace the old number with a new one? `\n      );\n      if (!result) {\n        resetInput();\n        return;\n      }\n      const updatePersonObj = { ...existingPerson, number: newPerson.number };\n\n      personServices\n        .update(existingPerson.id, updatePersonObj)\n        .then((response) => {\n          setPersons(\n            persons.map((person) =>\n              person.id !== existingPerson.id ? person : response\n            )\n          );\n          showMessage(`Updated ${newPerson.name} phone number`, \"success\");\n          resetInput();\n        })\n        .catch((error) => {\n          showMessage(\"Failed to update person\", \"error\");\n          console.error(error);\n        });\n      return;\n    }\n\n    const newPersonObj = {\n      name: newPerson.name,\n      number: newPerson.number,\n    };\n\n    personServices\n      .create(newPersonObj)\n      .then((response) => {\n        setPersons(persons.concat(response));\n        showMessage(`Added ${newPerson.name}`, \"success\");\n        resetInput();\n      })\n      .catch((error) => {\n        showMessage(\"Failed to add person\", \"error\");\n        console.error(error);\n      });\n  };\n\n  const deletePerson = (id, name) => {\n    const result = window.confirm(`Delete ${name}?`);\n\n    if (!result) {\n      return;\n    }\n\n    personServices\n      .deletePerson(id)\n      .then(() => {\n        setPersons(persons.filter((person) => person.id !== id));\n        showMessage(`Deleted ${name}`, \"success\");\n      })\n      .catch((error) => {\n        showMessage(\n          `Information of ${name} has already removed from server`,\n          \"error\"\n        );\n        console.error(error);\n      });\n  };\n\n  const handleChange = (event) => {\n    const { value, name } = event.target;\n\n    setNewPerson({ ...newPerson, [name]: value });\n  };\n\n  return (\n    <div className=\"app\">\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <FilterForm filter={filter} setFilter={setFilter} />\n      <PersonsFormInput\n        name={name}\n        number={number}\n        handleChange={handleChange}\n        addPerson={addPerson}\n      />\n      <h2>Numbers</h2>\n      <DisplayPersons\n        filter={filter}\n        persons={persons}\n        deletePerson={deletePerson}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}