(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t.n(r),a=t(16),o=t.n(a),s=(t(21),t(6)),i=t(3),u=t(5),l=t(4),d=t.n(l),b="http://localhost:3001/api/persons",j=function(){return d.a.get(b).then((function(e){return e.data}))},m=function(e){return d.a.post(b,e).then((function(e){return e.data}))},f=function(e){return d.a.delete("".concat(b,"/").concat(e)).then((function(e){return e}))},h=function(e,n){return d.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},O=t(0),p=function(e){var n=e.filter,t=e.setFilter;return Object(O.jsxs)("div",{className:"filter-container",children:[Object(O.jsx)("label",{children:"filter show with:"}),Object(O.jsx)("input",{name:"filter",value:n,onChange:function(e){return t(e.target.value)}})]})},v=function(e){var n=e.name,t=e.number,r=e.handleChange,c=e.addPerson;return Object(O.jsx)("div",{className:"persons-form-container",children:Object(O.jsxs)("form",{onSubmit:c,children:[Object(O.jsxs)("div",{className:"persons-form",children:[Object(O.jsx)("label",{children:"name:"})," ",Object(O.jsx)("input",{name:"name",value:n,onChange:r})]}),Object(O.jsxs)("div",{className:"persons-form",children:[Object(O.jsx)("label",{children:"number:"})," ",Object(O.jsx)("input",{name:"number",value:t,onChange:r})]}),Object(O.jsx)("div",{className:"persons-form-button",children:Object(O.jsx)("button",{type:"submit",children:"add"})})]})})},x=function(e){var n=e.person,t=e.deletePerson;return Object(O.jsxs)("li",{children:[n.name," ",n.number,Object(O.jsx)("button",{onClick:function(){return t(n.id,n.name)},children:"delete"})]})},g=function(e){var n=e.persons,t=e.filter,r=e.deletePerson;return Object(O.jsx)("div",{className:"display-persons-container",children:Object(O.jsx)("ul",{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(O.jsx)(x,{person:e,deletePerson:r},e.id)}))})})},w=function(e){var n=e.message;return null===n?null:Object(O.jsx)("div",{className:n.type,children:n.message})},N=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)({name:"",number:""}),o=Object(u.a)(a,2),l=o[0],d=o[1],b=Object(r.useState)(""),x=Object(u.a)(b,2),N=x[0],C=x[1],k=Object(r.useState)(null),y=Object(u.a)(k,2),P=y[0],S=y[1],F=l.name,D=l.number,E=function(e,n){S({message:e,type:n}),setTimeout((function(){S(null)}),4e3)};Object(r.useEffect)((function(){j().then((function(e){c(e)})).catch((function(e){E("Server is unavailable","error"),console.error(e)}))}),[]);var I=function(){d({name:"",number:""})};return Object(O.jsxs)("div",{className:"app",children:[Object(O.jsx)("h2",{children:"Phonebook"}),Object(O.jsx)(w,{message:P}),Object(O.jsx)(p,{filter:N,setFilter:C}),Object(O.jsx)(v,{name:F,number:D,handleChange:function(e){var n=e.target,t=n.value,r=n.name;d(Object(i.a)(Object(i.a)({},l),{},Object(s.a)({},r,t)))},addPerson:function(e){if(e.preventDefault(),l.name&&l.number){var n=t.find((function(e){return e.name===l.name}));if(n){if(!window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one? ")))return void I();var r=Object(i.a)(Object(i.a)({},n),{},{number:l.number});h(n.id,r).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e}))),E("Updated ".concat(l.name," phone number"),"success"),I()})).catch((function(e){E("Failed to update person","error"),console.error(e)}))}else{var a={name:l.name,number:l.number};m(a).then((function(e){c(t.concat(e)),E("Added ".concat(l.name),"success"),I()})).catch((function(e){E("Failed to add person","error"),console.error(e)}))}}else alert("Name and number field must be filled")}}),Object(O.jsx)("h2",{children:"Numbers"}),Object(O.jsx)(g,{filter:N,persons:t,deletePerson:function(e,n){window.confirm("Delete ".concat(n,"?"))&&f(e).then((function(){c(t.filter((function(n){return n.id!==e}))),E("Deleted ".concat(n),"success")})).catch((function(e){E("Information of ".concat(n," has already removed from server"),"error"),console.error(e)}))}})]})};o.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(N,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.5ef3168f.chunk.js.map